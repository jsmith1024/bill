#!/usr/bin/bash

here=`pwd`
# echo ${here}

# doxyfile="dox/DoxyHtml"
# if [ -f ${doxyfile} ]
# 	then
# 		doxygen ${doxyfile}
# fi

# doxyfile="dox/DoxyMan"
# if [ -f ${doxyfile} ]
# 	then
# 		doxygen ${doxyfile}
# fi



doxyfile="dox/DoxyHome"
if [ -f ${doxyfile} ]
	then
		doxygen ${doxyfile}
		retVal=$?
		if [ $retVal -ne 0 ]
		then
            echo "Error: exit code ${retVal} on ${doxyfile}."
            exit $retVal
        fi
fi

mkdir /tmp/bill

doxyfile="dox/books/reference_manual/DoxyRefman"
if [ -f ${doxyfile} ]
	then
		doxygen ${doxyfile}
		retVal=$?
		if [ $retVal -ne 0 ]
		then
            echo "Error: exit code ${retVal} on ${doxyfile}."
            exit $retVal
        fi
		cd    /tmp/bill/refman/latex
		make
		retVal=$?
		if [ $retVal -ne 0 ]
		then
            echo "Error: exit code ${retVal} on Make of ${doxyfile}."
            exit $retVal
        fi
		cd $here
        mv /tmp/bill/refman/latex/refman.pdf docs/Bill_Reference_Manual.pdf
fi

doxyfile="dox/DoxyUserman"
if [ -f ${doxyfile} ]
	then
		doxygen ${doxyfile}
		retVal=$?
		if [ $retVal -ne 0 ]
		then
            echo "Error: exit code ${retVal} on ${doxyfile}."
            exit $retVal
        fi
# 		cd docs/userman/latex
# 		make
# 		retVal=$?
# 		if [ $retVal -ne 0 ]
# 		then
#             echo "Error: exit code ${retVal} on Make of ${doxyfile}."
#             exit $retVal
#       fi
#       mv refman.pdf ../../Bill_User_Manual.pdf
# 		cd $here
fi

doxyfile="dox/books/Bill_Primer/DoxyLangman"
if [ -f ${doxyfile} ]
	then
		doxygen ${doxyfile}
		retVal=$?
		if [ $retVal -ne 0 ]
		then
            echo"Error: exit code ${retVal} on ${doxyfile}."
            exit $retVal
        fi
		cd /tmp/bill/langman/latex
		make
		retVal=$?
		if [ $retVal -ne 0 ]
		then
            echo "Error: exit code ${retVal} on Make of ${doxyfile}."
            exit $retVal
        fi
		cd $here
        mv /tmp/bill/langman/latex/refman.pdf docs/Bill_Primer.pdf
fi

doxyfile="dox/DoxyStlman"
if [ -f ${doxyfile} ]
	then
		doxygen ${doxyfile}
		retVal=$?
		if [ $retVal -ne 0 ]
		then
            echo "Error: exit code ${retVal} on ${doxyfile}."
            exit $retVal
        fi
# 		cd docs/stlman/latex
# 		make
# 		retVal=$?
# 		if [ $retVal -ne 0 ]
# 		then
#             echo "Error: exit code ${retVal} on Make of ${doxyfile}."
#             exit $retVal
#       fi
#       mv refman.pdf ../../Bill_Standard_Library_Reference.pdf
# 		cd $here
fi

# rm -r /tmp/bill

# echo ${here}
